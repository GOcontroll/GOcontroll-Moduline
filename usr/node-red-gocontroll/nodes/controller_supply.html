<script type="text/javascript">
    RED.nodes.registerType('Controller-Supply',{
        category: 'GOcontroll',
        color: '#f76d11',
        defaults: {
            name: {value:""},
			sampleTime: {value:"1000"},
        },
        inputs:0,
        outputs:1,
        icon: "font-awesome/fa-bolt",
		paletteLabel: "Supply",
        label: function() {
			if(this.name != "")
			{
            return this.name;
			}
		return "Controller supply";
        }
    });
</script>

<script type="text/x-red" data-template-name="Controller-Supply">
    <div class="form-row">
        <label for="node-input-name"><i class="icon-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>

	<div class="form-row">
        <label for="node-input-sampleTime"><i class="fa fa-repeat"></i> Sample time</label>
        <select id="node-input-sampleTime" style="width:300px">
            <option value="10000">10 s</option>
            <option value="1000">1 s</option>
			<option value="100">100 ms</option>
        </select>
    </div>
</script>

<script type="text/x-red" data-help-name="Controller-Supply">
<p>The controller supply node measures the battery voltage and the K15 pin(s) voltage from the system connector (C). These voltages can be used to monitor battery state or to detect a shutdown action.</p>
<p>The battery voltage is measured from pin 5 - 7</p>
<p>The K15 pin on the <strong>Moduline III</strong> is: pin 3</p>
<p>The K15 pins on the <strong>Moduline IV</strong> are: pin 2-3-4</p>
<p>The K15 pins on the <strong>Moduline Mini I</strong> are: pin 17 on the B connector, pin 16&17 on the A connector</p>
<p>&nbsp;</p>
<p><strong>Data format</strong></p>
<p>The supply information is pushed out of the node in a JSON object.</p>
<p>The <strong>Moduline III</strong> has 2 key - value pairs:</p>
<p><em>{"batteryVoltage" : U , "K15A" : U}&nbsp;&nbsp;</em></p>
<p>&nbsp;</p>
<p>The <strong>Moduline IV</strong> has 4 key - value pairs:</p>
<p><em>{"batteryVoltage" : U , "K15A" : U,</em></p>
<p><em>"K15B" : U , "K15C" : U}&nbsp;</em></p>
<p>&nbsp;</p>
<p>The values represent the&nbsp;measured voltages given in mV.</p>
</script>

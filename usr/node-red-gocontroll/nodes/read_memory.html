<script type="text/javascript">
    RED.nodes.registerType('Read-Memory',{
        category: 'GOcontroll',
        color: '#f76d11',
		defaults: {
			name: {value:""},
			key: {value:""},
			memtype: {value:"ram"},
			outputtype: {value:"object"},
			interval: {value:"1000"}
        },
        inputs:0,
        outputs:1,
        icon: "arrow-in.png",
		paletteLabel: "Read mem",
        label: function() {
			if(this.key.indexOf(',') > -1)
			{
			return this.name || "Data from memory using multiple keys";
			}
			else
			{
			return this.name||"Data from memory with key: "+ this.key;
			}
		},
    });
</script>

<script type="text/x-red" data-template-name="Read-Memory">
    <div class="form-row">
        <label for="node-input-name"><i class="icon-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name" style="width:350px">
    </div>
	
	<div class="form-row">
    <label for="node-input-key"><i class="fa fa-id-badge"></i> Key(s)</label>
	<textarea id="node-input-key" placeholder="exampleKey1,exampleKey2" style="width:350px" cols="200">
	</textarea>
    </div>
	
	<div class="form-row">
        <label for="node-input-memtype"><i class="fa fa-hdd-o"></i> Memory</label>
        <select id="node-input-memtype" style="width:350px">
			<option value="emmc">Persistant memory (eMMC)</option>
            <option value="ram">Non-persistant memory (RAM)</option>
        </select>
    </div>
	
	<div class="form-row">
        <label for="node-input-outputtype"><i class="fa fa-list-ul"></i> Type</label>
        <select id="node-input-outputtype" style="width:350px">
			<option value="object">Output as object with key-value pair </option>
            <option value="payload">Output as numeric payload</option>
        </select>
    </div>
	
		<div class="form-row">
        <label for="node-input-interval"><i class="fa fa-refresh"></i> Interval</label>
        <select id="node-input-interval" style="width:350px">
			<option value="0">Only on startup </option>
            <option value="1000">1 s</option>
            <option value="500">500 ms</option>
			<option value="100">100 ms</option>
		    <option value="50">50 ms</option>
        </select>
    </div>
</script>

<script type="text/x-red" data-help-name="Read-Memory">
<p>The memory blocks can be used to exchange data between a running Simulink model and Node-RED.&nbsp;</p>
<p>&nbsp;</p>
<p><strong>Function:</strong></p>
<p>The read block needs to be configured with minimal one key value. If more key's need to be retrieved from memory, separate each key with a comma (,). When the block finds the provided key(s) in memory, the corresponding value for each key are pushed out the node in JSON object format with an interval povided in the interval drop down list.</p>
<p>&nbsp;</p>
</script>
